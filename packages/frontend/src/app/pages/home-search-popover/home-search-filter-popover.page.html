<ion-list no-border>
  <ion-list-header>
    {{ 'pages.homeSearchFilterPopover.title' | translate }}
  </ion-list-header>

  <ion-item
    lines="full"
    class="cursor-pointer"
    (click)="openRatingFilter()"
    button
    detail="false"
  >
    <ion-label
      >{{ 'pages.homeSearchFilterPopover.filterByRating' | translate
      }}</ion-label
    >
    <ion-badge *ngIf="ratingFilter?.length" slot="end">
      {{ratingFilter.length}}
      <ion-icon name="funnel" style="vertical-align: bottom"></ion-icon>
    </ion-badge>
    <ion-icon name="caret-down-sharp" size="small" slot="end"></ion-icon>
  </ion-item>

  <ion-item
    lines="full"
    *ngIf="!guestMode"
    class="cursor-pointer"
    (click)="openLabelFilter()"
    button
    detail="false"
  >
    <ion-label
      >{{ 'pages.homeSearchFilterPopover.filterByLabel' | translate
      }}</ion-label
    >
    <ion-badge *ngIf="selectedLabels.length > 0" slot="end"
      >{{selectedLabels.length}}</ion-badge
    >
    <ion-icon name="caret-down-sharp" size="small" slot="end"></ion-icon>
  </ion-item>

  <ion-item lines="full" *ngIf="!guestMode">
    <ion-toggle
      [(ngModel)]="preferences[preferenceKeys.EnableLabelIntersection]"
      (ngModelChange)="savePreferences(true);"
    >
      <div class="ion-text-wrap">
        {{ 'pages.homeSearchFilterPopover.matchAllLabels' | translate }}
      </div>
    </ion-toggle>
  </ion-item>

  <ion-item lines="full" *ngIf="!guestMode">
    <ion-select
      label="{{ 'pages.homeSearchFilterPopover.includeFriends' | translate }}"
      [(ngModel)]="preferences[preferenceKeys.IncludeFriends]"
      (ngModelChange)="savePreferences(true);"
      okText="{{ 'generic.ok' | translate }}"
      cancelText="{{ 'generic.cancel' | translate }}"
    >
      <ion-select-option value="yes"
        >{{ 'pages.homeSearchFilterPopover.includeFriends.yes' | translate
        }}</ion-select-option
      >
      <ion-select-option value="search"
        >{{ 'pages.homeSearchFilterPopover.includeFriends.search' | translate
        }}</ion-select-option
      >
      <ion-select-option value="browse"
        >{{ 'pages.homeSearchFilterPopover.includeFriends.browse' | translate
        }}</ion-select-option
      >
      <ion-select-option value="no"
        >{{ 'pages.homeSearchFilterPopover.includeFriends.no' | translate
        }}</ion-select-option
      >
    </ion-select>
  </ion-item>

  <ion-item lines="none" *ngIf="guestMode">
    <p>{{ 'pages.homeSearchFilterPopover.optionsHidden' | translate }}</p>
  </ion-item>
</ion-list>
